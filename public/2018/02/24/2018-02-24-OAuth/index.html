<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="WanBlog | 개발블로그">
    <meta name="keyword"  content="WanBlog | 개발블로그">
    <meta name="naver-site-verification" content="c80ae88a487472e88ec9170ad53578e81edad8b1"/>

    <meta property="og:type" content="article">
	  <meta property="og:title" content="Wan Blog">
	  <meta property="og:url" content="https://minwan1.github.io/img/ironman-draw.png">
	  <meta property="og:site_name" content="JavaScript/Java/Spring 개발 Blog">
	  <meta property="og:description" content="WanBlog | 개발블로그">
	  <meta property="og:image" content="https://minwan1.github.io/img/ironman-draw.png">
	  <meta property="og:updated_time" content="2017-11-26T10:28:42.000Z">
    
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          OAuth란? - WanBlog | 개발블로그
        
    </title>

    <link rel="canonical" href="https://minwan1.github.io/2018/02/24/2018-02-24-OAuth/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('null')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/img/signature/BeanTechSign-white.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#OAuth" title="OAuth">OAuth</a>
                            
                              <a class="tag" href="/tags/#OAuth1" title="OAuth1">OAuth1</a>
                            
                              <a class="tag" href="/tags/#OAuth2" title="OAuth2">OAuth2</a>
                            
                              <a class="tag" href="/tags/#OAuth1 OAuth2 차이점" title="OAuth1 OAuth2 차이점">OAuth1 OAuth2 차이점</a>
                            
                              <a class="tag" href="/tags/#Authentication" title="Authentication">Authentication</a>
                            
                              <a class="tag" href="/tags/#Authorization" title="Authorization">Authorization</a>
                            
                        </div>
                        <h1>OAuth란?</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Wan on
                            2018-02-24
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Wan Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2><span id="oauth1-란">OAuth1 란</span></h2>
<p>OAuth는 Open Authorization, Open Authentication 뜻하는 것으로 애플리케이션(페이스북,구글,트위터)(Service Provider)의 유저의 비밀번호를 Third party앱에 제공 없이 인증,인가를 할 수 있는 오픈 스탠다드 프로토콜이다. OAuth 인증을 통해 애플리케이션 API를 유저대신에 접근할 수 있는 권한을 얻을 수 있다. OAuth가 사용되기 전에는 외부 사이트와 인증기반의 데이터를 연동할 때  인증방식의 표준이 없었기 때문에 기존의 기본인증인 아이디와 비밀번호를 사용하였는데, 이는 보안상 취약한 구조였다. 유저의 비밀번호가 노출될 가망성이 크기 때문이다. 그렇기 때문에 이 문제를 보안하기 위해 OAuth의 인증은 API를 제공하는 서버에서 진행하고, 유저가 인증되었다는 Access Token을 발급하였다. 그 발급된 Access token으로 Third party(Consumer)애플리케이션에서는 Service Provider의 API를 안전하고 쉽게 사용할 수 있게 되었다.</p>
<h3><span id="동작-방식">동작 방식</span></h3>
<p>먼저 OAuth의 동작 방식을 알기 위해서는 아래의 개념을 알고 있어야 한다.</p>
<h4><span id="oauth의-개념">OAuth의 개념</span></h4>
<p>먼저 OAuth의는 아래와 같은 개념을 가지고있다.</p>
<table>
<thead>
<tr>
<th>용어</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>User</td>
<td>Service Provider에 계정을 가지고 있으면서, Consumer앱을 이용하려는 사용자</td>
</tr>
<tr>
<td>Service Provider</td>
<td>OAuth를 사용하는 Open API를 제공하는 서비스 (facebook,google등)</td>
</tr>
<tr>
<td>Protected Resource</td>
<td>Service Provider로부터 제공되어지는 API 자원들</td>
</tr>
<tr>
<td>Consumer</td>
<td>OAuth 인증을 사용해 Service Provider의 기능을 사용하려는 애플리케이션이나 웹 서비스</td>
</tr>
<tr>
<td>Consumer Key</td>
<td>Consumer가 Service Provider에게 자신을 식별하는 데 사용하는키</td>
</tr>
<tr>
<td>Consumer Secret</td>
<td>Consumer Key의 소유권을 확립하기 위해 Consumer가 사용하는 Secret</td>
</tr>
<tr>
<td>Request Token</td>
<td>Consumer가 Service Provider에게 접근 권한을 인증받기 위해 사용하는 값. 인증이 완료된 후에는 Access Token으로 교환한다.</td>
</tr>
<tr>
<td>Access Token</td>
<td>인증 후 Consumer가 Service Provider의 자원에 접근하기 위한 키를 포함한 값</td>
</tr>
<tr>
<td>Token Secret</td>
<td>주어진 토큰의 소유권을 인증하기 위해 소비자가 사용하는 Secret</td>
</tr>
</tbody>
</table>
<h4><span id="oauth의-workflow">OAuth의 WorkFlow</span></h4>
<p>다음은  OAuth의 1.0의 WorkFlow이다.<br>
<img src="https://i.imgur.com/7T48KvR.png" alt=""></p>
<p>위 WorkFlow 흐름은 간단하게 이렇다.</p>
<ol>
<li>그림에는 없지만 가장 먼저 Consumer는 Service Provider로부터 Client key와 Secret을 발급 받아야한다. 이것은 Service Provider에 API를 사용할것을 등록하는것과 동시에 Service Provider가 Consmer를 식별할 수 있게 해준다.</li>
<li>그림에 A 처럼 Request Token을 요청할 때 Consumer 정보, Signature 정보를 포함하여 Request token을 요청을하고 B의 흐름처럼 Request token을 발급받는다.</li>
<li>Request Token값을 받은후 Consumer는 C처럼 User를 Service Provider에 인증 사이트로 다이렉트시키고, 유저는 그곳에서 Service Provider에 유저임을 인증하게 된다.</li>
<li>그러면 Consumer는 D의 정보처럼 해당 유저가 인증이되면 OAuth_token와 OAuth_verifier를 넘겨준다.</li>
<li>그이후에 Consumer는 OAuth_token와 OAuth_verifier받았다면 E의 흐름처럼 다시 서명을 만들어 Access Token을 요청하게 된다.</li>
<li>그리고 Service Provider는 받은 토큰과 서명들이 인증이 되었으면 Access Token을 F의 정보 처럼 넘기게된다.</li>
<li>그리고 그 Access Token 및 서명정보를 통해 Service Provider에 Protected Resource에 접근할 수 있게 된다.</li>
</ol>
<p>아래는 Consumer의 요청시 매개변수의 종류에 대한 설명이다.</p>
<h5><span id="request-token-발급-매개변수">Request Token 발급 매개변수</span></h5>
<p>Request Token 발급 요청 시 사용하는 매개변수는 다음 표와 같다.</p>
<table>
<thead>
<tr>
<th>매개변수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>OAuth_callback</td>
<td>Service Provider가 인증을 완료한 후 리다이렉트할 Consumer의 웹 주소. 만약 Consumer가 웹 애플리케이션이 아니라 리다이렉트할 주소가 없다면 소문자로 ‘oob’(Out Of Band라는 뜻)를 값으로 사용한다.</td>
</tr>
<tr>
<td>OAuth_consumer_key</td>
<td>Consumer를 구별하는 키 값. Service Provider는 이 키 값으로 Consumer를 구분한다.</td>
</tr>
<tr>
<td>OAuth_nonce</td>
<td>Consumer에서 임시로 생성한 임의의 문자열. OAuth_timestamp의 값이 같은 요청에서는 유일한 값이어야 한다. 이는 악의적인 목적으로 계속 요청을 보내는 것을 막기 위해서이다.</td>
</tr>
<tr>
<td>OAuth_signature</td>
<td>OAuth 인증 정보를 암호화하고 인코딩하여 서명 값. OAuth 인증 정보는 매개변수 중에서 OAuth_signature를 제외한 나머지 매개변수와 HTTP 요청 방식을 문자열로 조합한 값이다. 암화 방식은 OAuth_signature_method에 정의된다.</td>
</tr>
<tr>
<td>OAuth_signature_method</td>
<td>OAuth_signature를 암호화하는 방법. HMAC-SHA1, HMAC-MD5 등을 사용할 수 있다.</td>
</tr>
<tr>
<td>OAuth_timestamp</td>
<td>요청을 생성한 시점의 타임스탬프. 1970년1월 1일 00시 00분 00초 이후의 시간을 초로 환산한 초 단위의 누적 시간이다.</td>
</tr>
<tr>
<td>OAuth_version</td>
<td>OAuth 사용 버전. 1.0a는 1.0이라고 명시하면 된다.</td>
</tr>
</tbody>
</table>
<h5><span id="request-token-signature-생성">Request Token Signature 생성</span></h5>
<p>OAuth 1.0에서 Service Provider에게 요청을 할려면 매번 전자 서명을 만들어서 보내야한다. 아래는 전자서명을 만드는 순서이다.</p>
<ol>
<li>
<p>요청 매개변수를 모두 모은다.<br>
OAuth_signature를 제외하고 'OAuth_'로 시작하는 OAuth 관련 매개변수를 모은다. 모든 매개변수를 사전순으로 정렬하고 각각의 키(key)와 값(value)에 URL 인코딩(rfc3986)을 적용한다. URL 인코딩을 실시한 결과를 = 형태로 나열하고 각 쌍 사이에는 &amp;을 넣는다. 이렇게 나온 결과 전체에 또 URL 인코딩을 적용한다.</p>
</li>
<li>
<p>매개변수를 정규화(Normalize)한다.<br>
모든 매개변수를 사전순으로 정렬하고 각각의 키(key)와 값(value)에 URL 인코딩(rfc3986)을 적용한다. URL 인코딩을 실시한 결과를 = 형태로 나열하고 각 쌍 사이에는 &amp;을 넣는다. 이렇게 나온 결과 전체에 또 URL 인코딩을 적용한다.</p>
</li>
<li>
<p>Signature Base String을 만든다.<br>
HTTP method 명(GET 또는 POST), Consumer가 호출한 HTTP URL 주소(매개변수 제외), 정규화한 매개변수를 '&amp;'를 사용해 결합한다. 즉 ‘[GET|POST] + &amp; + [URL 문자열로 매개변수는 제외] + &amp; + [정규화한 매개변수]’ 형태가 된다.</p>
</li>
<li>
<p>키 생성<br>
3번 과정까지 거쳐 생성한 문자열을 암호화한다. 암호화할 때 Consumer Secret Key를 사용한다. Consumer Secret Key는 Consumer가 Service Provider에 사용 등록을 할 때 발급받은 값이다. HMAC-SHA1 등의 암호화 방법을 이용하여 최종적인 OAuth_signature를 생성한다.</p>
</li>
</ol>
<h5><span id="access-token-매개변수">Access Token 매개변수</span></h5>
<p>다음은 Access Token 발급을 요청할 때 사용하는 매개변수 표이다.</p>
<table>
<thead>
<tr>
<th>매개변수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>OAuth_consumer_key</td>
<td>Consumer를 구별하는 키 값. Service Provider는 이 키 값으로 Consumer를 구분한다.</td>
</tr>
<tr>
<td>OAuth_nonce</td>
<td>Consumer에서 임시로 생성한 임의의 문자열. OAuth_timestamp의 값이 같은 요청에서는 유일한 값이어야 한다. 이는 악의적인 목적으로 계속 요청을 보내는 것을 막기 위해서이다.</td>
</tr>
<tr>
<td>OAuth_signature</td>
<td>OAuth 인증 정보를 암호화하고 인코딩하여 서명 값. OAuth 인증 정보는 매개변수 중에서 OAuth_signature를 제외한 나머지 매개변수와 HTTP 요청 방식을 문자열로 조합한 값이다. 암화 방식은 OAuth_signature_method에 정의된다.</td>
</tr>
<tr>
<td>OAuth_signature_method</td>
<td>OAuth_signature를 암호화하는 방법. HMAC-SHA1, HMAC-MD5 등을 사용할 수 있다.</td>
</tr>
<tr>
<td>OAuth_timestamp</td>
<td>요청을 생성한 시점의 타임스탬프. 1970년1월 1일 00시 00분 00초 이후의 시간을 초로 환산한 초 단위의 누적 시간이다.</td>
</tr>
<tr>
<td>OAuth_version</td>
<td>OAuth 사용 버전</td>
</tr>
<tr>
<td>OAuth_verifier</td>
<td>Request Token 요청 시 OAuth_callback으로 전달받은 OAuth_verifier 값</td>
</tr>
<tr>
<td>OAuth_token</td>
<td>Request Token 요청 시 OAuth_callback으로 전달받은 OAuth_token 값</td>
</tr>
</tbody>
</table>
<h5><span id="api호출을-위한-매개변수">API호출을 위한 매개변수</span></h5>
<p>다음은 Access Token을 사용해 API를 호출할 때 사용하는 매개변수는 다음 표이다.</p>
<table>
<thead>
<tr>
<th>매개변수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>OAuth_consumer_key</td>
<td>Consumer를 구별하는 키 값. Service Provider는 이 키 값으로 Consumer를 구분한다.</td>
</tr>
<tr>
<td>OAuth_nonce</td>
<td>Consumer에서 임시로 생성한 임의의 문자열. OAuth_timestamp의 값이 같은 요청에서는 유일한 값이어야 한다. 이는 악의적인 목적으로 계속 요청을 보내는 것을 막기 위해서이다.</td>
</tr>
<tr>
<td>OAuth_signature</td>
<td>OAuth 인증 정보를 암호화하고 인코딩하여 서명 값. OAuth 인증 정보는 매개변수 중에서 OAuth_signature를 제외한 나머지 매개변수와 HTTP 요청 방식을 문자열로 조합한 값이다. 암화 방식은 OAuth_signature_method에 정의된다.</td>
</tr>
<tr>
<td>OAuth_signature_method</td>
<td>OAuth_signature를 암호화하는 방법. HMAC-SHA1, HMAC-MD5 등을 사용할 수 있다.</td>
</tr>
<tr>
<td>OAuth_timestamp</td>
<td>요청을 생성한 시점의 타임스탬프. 1970년1월 1일 00시 00분 00초 이후의 시간을 초로 환산한 초 단위의 누적 시간이다.</td>
</tr>
<tr>
<td>OAuth_version</td>
<td>OAuth 버전</td>
</tr>
<tr>
<td>OAuth_token</td>
<td>OAuth_callback으로 전달받은 OAuth_token</td>
</tr>
</tbody>
</table>
<h2><span id="oauth2란">OAuth2란</span></h2>
<p>OAuth의2는 OAuth의1의 유저의 인증플로우, 전반적인 목적만 공유하고 OAuth의1.0을 새로 작성한것이다. OAuth의1.0과 OAuth의2.0의 차이는 앱 애플리케이션, 웹 애플리케이션, 데스크탑 애플리케이션등의 인증방식을 강화하고 Consumer에 개발 간소화를 중심으로 개발 되었다.</p>
<h3><span id="oauth의10-과-oauth의20차이점">OAuth의1.0 과 OAuth의2.0차이점</span></h3>
<p>아래는 OAuth 1.0 에서 OAuth2.0 차이점은 일단 인증 절차 간소화 됨으로써 개발자들이 구현하기 더쉬워졌고, 기존에 사용하던 용어도 바뀌면서 Authorizaiton server와 Resource서버의 분리가 명시적으로 되었다. 또한 다양한 인증 방식을 지원하게 됐다. 아래는 1.0과 2.0의 차이점을 나열한것이다.</p>
<h4><span id="인증-절차-간소화">인증 절차 간소화</span></h4>
<ul>
<li>기능의 단순화, 기능과 규모의 확장성 등을 지원하기 위해 만들어 졌다.</li>
<li>기존의 OAuth1.0은 디지털 서명 기반이었지만 OAuth2.0의 암호화는 https에 맡김으로써 복잡한 디지털 서명에관한 로직을 요구하지 않기때문에 구현 자체가 개발자입장에서 쉬워짐.</li>
</ul>
<h4><span id="용어-변경">용어 변경</span></h4>
<ul>
<li>Resource Owner : 사용자 (1.0 User해당)</li>
<li>Resource Server : REST API 서버 (1.0 Protected Resource)</li>
<li>Authorization Server : 인증서버 (API 서버와 같을 수도 있음)(1.0 Service Provider)</li>
<li>Client : 써드파티 어플리케이션 (1.0 Service Provider 해당)</li>
</ul>
<h4><span id="resource-server와-authorization-server서버의-분리">Resource Server와 Authorization Server서버의 분리</span></h4>
<ul>
<li>커다란 서비스는 인증 서버를 분리하거나 다중화 할 수 있어야 함.</li>
<li>Authorization Server의 역할을 명확히 함.</li>
</ul>
<h4><span id="다양한-인증-방식grant_type">다양한 인증 방식(Grant_type)</span></h4>
<ul>
<li>Authorization Code Grant</li>
<li>Implicit Grant</li>
<li>Resource Owner Password Credentials Grant</li>
<li>Client Credentials Grant</li>
<li>Device Code Grant</li>
<li>Refresh Token Grant</li>
</ul>
<h3><span id="인증-종류">인증 종류</span></h3>
<p>OAuth 2.0의 인증종류는 6가지 입니다. 아래는 각각의 인증방식의 flow와 간단한 설명입니다.</p>
<h4><span id="authorization-code-grant">Authorization Code Grant</span></h4>
<p>일반적인 웹사이트에서 소셜로그인과 같은 인증을 받을 때 가장 많이 쓰는 방식으로 기본적으로 지원하고 있는 방식이다. 아래는 Authorization Code Grant type 으로 Access Token을 얻어오는 시퀀스 다이어그램이다.<br>
<img src="https://i.imgur.com/xaKCz9E.png" alt=""></p>
<ol>
<li>먼저 클라이언트가 Redirect URL을 포함하여 Authorization server 인증 요청을 한다.</li>
<li>AuthorizationServer는 유저에게 로그인창을 제공하여 유저를 인증하게 된다.</li>
<li>AuthorizationServer는 Authorization code를 클라이언트에게 제공해준다.</li>
<li>Client는 코드를 Authorization server에 Access Token을 요청한다.</li>
<li>Authorization 서버는 클라이언트에게 Access token을 발급해준다.</li>
<li>그 Access token을 이용하여 Resource server에 자원을 접근할 수 있게 된다.</li>
<li>그이후에 토큰이 만료된다면 refresh token을 이용하여 토큰을 재발급 받을 수 있다.</li>
</ol>
<h4><span id="implicit-grant">Implicit Grant</span></h4>
<p>Public Client인 브라우저 기반의 애플리케이션(Javascript application)이나 모바일 애플리케이션에서 바로 Resource Server에 접근하여 사용할 수 있는 방식이다.<br>
<img src="https://i.imgur.com/DayLoth.png" alt=""></p>
<ol>
<li>클라이언트는 Authorization server에 인증을 요청한다.</li>
<li>유저는 Authorization server를 통해 인증한다.</li>
<li>Authorization server는 Access token을 포함하여 클라이언트의 Redirect url을 호출한다.</li>
<li>클라이언트는 해당 Access token이 유효한지 Authorization server에 인증요청한다.</li>
<li>인증서버는 그 토큰이 유효하다면 토큰의 만기시간과함께 리턴해준다.</li>
<li>클라이언트는 Resource server에 접근할 수 있게된다.</li>
</ol>
<h4><span id="resource-owner-password-credentials-grant">Resource Owner Password Credentials Grant</span></h4>
<p>Client에 아이디/패스워드를 받아 아이디/패스워드로 직접 access token을 받아오는 방식이다. Client가 신용이 없을 때에는 사용하기에 위험하다는 단점이 있다. 클라이언트가 확실한 신용이 보장될 때 사용할 수 있는 방식이다.<br>
<img src="https://i.imgur.com/FVv86QT.png" alt=""></p>
<ol>
<li>User가 Id와 Password를 입력한다</li>
<li>클라이언트는 유저의 id와 password와 클라이언트 정보를 넘긴다.</li>
<li>Authorization sever는 Access token을 넘긴다.</li>
</ol>
<h4><span id="client-credentials-grant">Client Credentials Grant</span></h4>
<p>애플리케이션이 Confidential Client일 때 id와 secret을 가지고 인증하는 방식이다.<br>
<img src="https://i.imgur.com/TMXAjvo.png" alt=""></p>
<ol>
<li>클라이언트 정보를 Authorization server에 넘긴다.</li>
<li>Access Token을 Client에 전달한다.</li>
</ol>
<h4><span id="device-code-grant">Device Code Grant</span></h4>
<p>장치 코드 부여 유형은 브라우저가 없거나 입력이 제한된 장치에서 사용됩니다.</p>
<h4><span id="refresh-token-grant">Refresh Token Grant</span></h4>
<p>기존에 저장해둔 리프러시 토큰이 존재할 때 엑세스토큰 재발급 받을 필요가 있을 때 사용한다. 그리고 기존 액세스는 토큰이 만료된다.</p>
<p>참고 사이트</p>
<ul>
<li><a href="http://d2.naver.com/helloworld/24942" target="_blank" rel="noopener">Naver D2</a></li>
<li><a href="https://OAuth.net/core/1.0/" target="_blank" rel="noopener">OAuth.net</a></li>
<li><a href="https://showerbugs.github.io/2017-11-16/OAuth-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C" target="_blank" rel="noopener">Showerbugs</a></li>
<li><a href="https://www.OAuth.com/OAuth2-servers/differences-between-OAuth-1-2/" target="_blank" rel="noopener">OAuth 2.0 Servers</a></li>
<li><a href="https://brunch.co.kr/@sbcoba/4" target="_blank" rel="noopener">이수홍</a></li>
<li><a href="https://developer.accela.com/docs/construct-authCodeFlow.html" target="_blank" rel="noopener">Authorization Code Flow</a></li>
<li><a href="https://ox.gluu.org/doku.php?id=oxauth:implicitgrant" target="_blank" rel="noopener">OX Wiki</a></li>
</ul>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2018/03/11/2018-03-11-Spring-OAuth구현/" data-toggle="tooltip" data-placement="top" title="Spring Security OAuth2구현">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2018/02/04/2018-02-04-Class-Diagram/" data-toggle="tooltip" data-placement="top" title="Class Diagram">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">OAuth1 란</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">동작 방식</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">OAuth의 개념</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.2.</span> <span class="toc-nav-text">OAuth의 WorkFlow</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.2.1.</span> <span class="toc-nav-text">Request Token 발급 매개변수</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.2.2.</span> <span class="toc-nav-text">Request Token Signature 생성</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.2.3.</span> <span class="toc-nav-text">Access Token 매개변수</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.2.4.</span> <span class="toc-nav-text">API호출을 위한 매개변수</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">OAuth2란</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">OAuth의1.0 과 OAuth의2.0차이점</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">인증 절차 간소화</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">용어 변경</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">Resource Server와 Authorization Server서버의 분리</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.1.4.</span> <span class="toc-nav-text">다양한 인증 방식(Grant_type)</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">인증 종류</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">Authorization Code Grant</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">Implicit Grant</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.3.</span> <span class="toc-nav-text">Resource Owner Password Credentials Grant</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.4.</span> <span class="toc-nav-text">Client Credentials Grant</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.5.</span> <span class="toc-nav-text">Device Code Grant</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">2.2.6.</span> <span class="toc-nav-text">Refresh Token Grant</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#OAuth" title="OAuth">OAuth</a>
                        
                          <a class="tag" href="/tags/#OAuth1" title="OAuth1">OAuth1</a>
                        
                          <a class="tag" href="/tags/#OAuth2" title="OAuth2">OAuth2</a>
                        
                          <a class="tag" href="/tags/#OAuth1 OAuth2 차이점" title="OAuth1 OAuth2 차이점">OAuth1 OAuth2 차이점</a>
                        
                          <a class="tag" href="/tags/#Authentication" title="Authentication">Authentication</a>
                        
                          <a class="tag" href="/tags/#Authorization" title="Authorization">Authorization</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://beantech.org" target="_blank">Bean Tech</a></li>
                    
                        <li><a href="http://blog.kaijun.rocks" target="_blank">Kaijun&#39;s Blog</a></li>
                    
                        <li><a href="http://huangxuan.me" target="_blank">Hux Blog</a></li>
                    
                        <li><a href="#" target="_blank">It Helps SEO</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "https-minwan1-github-io";
    var disqus_identifier = "https://minwan1.github.io/2018/02/24/2018-02-24-OAuth/";
    var disqus_url = "https://minwan1.github.io/2018/02/24/2018-02-24-OAuth/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Minwan1">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Wan 2018 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://beantech.org">BeanTech</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://minwan1.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://minwan1.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
