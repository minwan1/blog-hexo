<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="WanBlog | 개발블로그">
    <meta name="keyword"  content="WanBlog | 개발블로그">
    <meta name="naver-site-verification" content="c80ae88a487472e88ec9170ad53578e81edad8b1"/>

    <meta property="og:type" content="article">
	  <meta property="og:title" content="Wan Blog">
	  <meta property="og:url" content="https://minwan1.github.io/img/ironman-draw.png">
	  <meta property="og:site_name" content="JavaScript/Java/Spring 개발 Blog">
	  <meta property="og:description" content="WanBlog | 개발블로그">
	  <meta property="og:image" content="https://minwan1.github.io/img/ironman-draw.png">
	  <meta property="og:updated_time" content="2017-11-26T10:28:42.000Z">
    
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Spring cache - WanBlog | 개발블로그
        
    </title>

    <link rel="canonical" href="https://minwan1.github.io/2018/03/18/2018-03-18-Spring-Cache/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('null')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/img/signature/BeanTechSign-white.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Spring" title="Spring">Spring</a>
                            
                              <a class="tag" href="/tags/#Java" title="Java">Java</a>
                            
                        </div>
                        <h1>Spring cache</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Wan on
                            2018-03-18
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Wan Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2><span id="spring-cache-ehcache-구현">Spring cache, ehcache 구현</span></h2>
<h3><span id="cache">Cache</span></h3>
<p>일반적으로 애플리케이션에서 데이터베이스를 접근하게 되면 많은 시간과 비용을 소비하게 된다. 그래서 반복적으로 일어나면서 많은 양의 데이터를 가지고 와야 하는 작업은 부담이 된다. 그래서 많은 사람들은 이러한 문제를 해결하기 위해서 캐시를 사용한다. 캐시를 사용하면 데이터베이스 접근하는 횟수를 획기적으로 개선할 수 있기 때문이다.</p>
<h3><span id="spring-cache">Spring Cache</span></h3>
<p>그래서 Spring에서는 이러한 Cache 기능을 지원하기 위해서 Spring caching abstraction을 지원한다. Spring caching abstraction는 다른 캐시 솔루션을 Spring CacheManager를 통해서 쉽게 사용할 수 있도록 해준다. Spring CacheManager는 다양한 캐시의 솔루션들을 코드에 최소의 영향으로 다양한 캐싱 솔루션(라이브러리)을 도입할 수 있게 해준다. Spring caching abstraction은 자바 메소드에 캐싱을 적용한다. 그래서 메소드가 실행될 떄마다 메소드의 넘어온 파라미터에 따라 캐쉬를 적용하게 된다. 예를들어 2초이상걸리는 A라는 메소드를 호출 했을 때 파라미터로 1의 값을 넘겼고, 결과값 으로 2를 받았다고 하면 그다음에 다시 한번 누군가가 A메소드를 1의 파라미터를 넘겼으면 A메소드는 2초의 시간이 걸리지 않고 캐시되어 있는 데이터 2를 바로 리턴해준다. 이것의 범위는 애플리케이션내의 범위이다.</p>
<h3><span id="spring-cache-다양한-캐시-솔루션-도입방법">Spring Cache 다양한 캐시 솔루션 도입방법</span></h3>
<p>Spring 3.1 부터 간단하게 캐시를 도입할 수 있게 되었다. Spring에서 제공해주는 CacheManager인터페이스만 구현체에 따라 구현 해주면 된다. 다른 캐시 라이브러리들을 추가해서 구현체에 사용할 수 있다.Spring Boot에서 캐시를 사용하기위해서는 spring-boot-starter-cache를 추가하는데 기본적으로 spring-boot-starter-cache 이외에 아무 서드파트 라이브러리를 추가 하지 않는다면 기본설정인 SimpleCacheConfiguration 가 동작하며 CacheManager로는 ConcurrentMapCacheManager가 빈으로 등록이 된다. ConcurrentMapCacheManager는 가벼워서 많이들 사용하지만 Product용으로는 Ehcache 사용하는 것 같다. Ehcache를 사용하면 좀 더 확장적이고 분산시스템등 커스터마이징을 할 수 있기 때문이다.</p>
<h3><span id="spring-cache-사용방법">Spring Cache 사용방법</span></h3>
<p>먼저 Spring Cache를 사용하기 위해서는 메이븐에 아래와같이 라이브러리를 추가해줘야한다.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>위와 같이 메이븐에 내용을 추가하고 @EnableCaching 를 선언하게 되면 Spring container에 빈이 등록된다. 기본적으로는 위에서 말햇듯이 ConcurrentMapCacheManager이 등록된다. 하지만 상황에 맞게 다른 캐쉬 구현체를 등록할 수 있다. 그 다음 Cache를 적용하기를 원하는 메소드에 @Cacheable 를 붙이면 된다. 이어노테이션 이외에도 몇개의 어노테이션이 존재한다. 그리고 그 어노테이션에 맞는 몇개의 속성들이 존재한다. 아래는 그 어노테이션과 속성에대한 간단한 설명이 있다.</p>
<p>다음은 스프링 캐시 설정 어노테이션들이다.</p>
<table>
<thead>
<tr>
<th>어노테이션</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Cacheable</td>
<td>메소드에 캐시 트리거 설정</td>
</tr>
<tr>
<td>@CachePut</td>
<td>메소드 실행과 방해없이 캐시 갱신</td>
</tr>
<tr>
<td>@CacheEvict</td>
<td>캐시되있는 데이터 지우기</td>
</tr>
<tr>
<td>@CacheConfig</td>
<td>캐쉬 관려설정</td>
</tr>
<tr>
<td>@EnableCaching</td>
<td>스프링 캐시활성화</td>
</tr>
</tbody>
</table>
<p>다음은 캐시 어노테이션들의 속성이다</p>
<table>
<thead>
<tr>
<th>어노테이션</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td>캐시의 이름</td>
</tr>
<tr>
<td>key</td>
<td>캐시할 키를 설정(기본설정하지 않으면 파라미터로 설정됨)</td>
</tr>
<tr>
<td>condition</td>
<td>특정 조건에 따라 캐시를 할지 않을지 결정</td>
</tr>
<tr>
<td>cacheManager등</td>
<td>해당 캐시 매니저 설정가능</td>
</tr>
</tbody>
</table>
<p>좀더 많은 설정들을 확인하기 위해서는 <a href="https://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/cache.html" target="_blank" rel="noopener">공식문서</a>를 참조하면 된다.</p>
<h4><span id="spring-cache-concurrentmapcachemanager-적용">Spring Cache ConcurrentMapCacheManager 적용</span></h4>
<p>먼저 간단하게 ConcurrentMapCacheManager를 이용해서 캐시를 구현해보자.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(CacheApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>일단 위와 같이 @EnableCaching를 선언함으로 Spring Cache를 사용하겠다고 선언한다. 그리고 사용하고자하는 메소드위에 @Cacheable 어노테이션을 적는다. 이렇게 되면 캐시기능이 적용된다.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Cacheable</span>(value = <span class="string">"members"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Member <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"test"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(id == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>  Member.builder()</span><br><span class="line">                    .id(<span class="number">1</span>)</span><br><span class="line">                    .age(<span class="number">15</span>)</span><br><span class="line">                    .name(<span class="string">"김철수"</span>)</span><br><span class="line">                    .build();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span>  Member.builder()</span><br><span class="line">                    .id(<span class="number">2</span>)</span><br><span class="line">                    .age(<span class="number">17</span>)</span><br><span class="line">                    .name(<span class="string">"김아무개"</span>)</span><br><span class="line">                    .build();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>이 findById 메소드에 멤버 id로 1이라는 id를 호출한 후에 다시 한번 똑같은 id로 호출하게 되면 이 findById메소드를 타지않고 캐시 되어 있는 데이터를 가지고오는것을 확인할 수 있다. 여기에서 제대로 캐시기능이 적용 되었는지 테스트하기위해서 System.out.println(“test”)로 로거를 찍었는데 2번이상 1번아이디의 유저를 호출하려고 해도 아래와 같이 한번만 test가 로그에 찍히는 것을 확인할 수 있다.<br>
<img src="https://i.imgur.com/KB4IssF.png" alt=""></p>
<p>위에 ConcurrentMapCacheManager캐시 관련 소스는 여기 <a href="https://github.com/minwan1/blog-example/tree/concurrent-cache-example/cache" target="_blank" rel="noopener">깃허브</a>에서 확인할 수 있다.</p>
<h4><span id="spring-cache-ehcache-적용">Spring Cache Ehcache 적용</span></h4>
<p>이번에는 Ehcache를 적용하는 예제를 구현할 것이다. Ehcache를 사용하기 위해서는 아래와 같이 메이븐을 추가해줘야 한다.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.ehcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.2.2.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>그리고 Ehcache를 사용하기 위해서는 아래와 같이 xml 설정을 해줘야 한다. Ehcache xml 설정에 대한 세부 내용은 <a href="http://www.ehcache.org/" target="_blank" rel="noopener">공식 홈페이지</a>에서 확인할 수 있다.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">updateCheck</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">monitoring</span>=<span class="string">"autodetect"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">dynamicConfig</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"members"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxEntriesLocalDisk</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">eternal</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToIdleSeconds</span>=<span class="string">"300"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LFU"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">transactionalMode</span>=<span class="string">"off"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">persistence</span> <span class="attr">strategy</span>=<span class="string">"localTempSwap"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>간단히 위의 내용을 설명하자면 'members’라는 캐시의 이름을 선언했고, 최대 100개의 member들을 heap store에 담을 수 있고, 최대 1천개의 members은 diskStore에(java.io.tmpdir) 보관될 것이다. 이 member는 5분 이상 변화가 없거나 10분 이상 살아있다면 이캐시는 만료 될 것이다.</p>
<p>Ehcache XML 설정을 한후 Spring Cache를 등록하면 기본적으로 ConcurrentMapCacheManager가 등록되니까 Ehcache를 사용하기위해서 아래와같이 ehCacheCacheManager 빈을 등록해야한다.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> EhCacheCacheManager(ehCacheCacheManager().getObject());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EhCacheManagerFactoryBean <span class="title">ehCacheCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    EhCacheManagerFactoryBean factory = <span class="keyword">new</span> EhCacheManagerFactoryBean();</span><br><span class="line">    factory.setConfigLocation(<span class="keyword">new</span> ClassPathResource(<span class="string">"ehcache.xml"</span>));</span><br><span class="line">    factory.setShared(<span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> factory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위에 ConcurrentMapCacheManager에서는 member를 조회하는 곳에서만 캐시를 사용했었는데 여기에서는 멤버를 조회하고, 저장된 캐시를 제거하는 예제를 만들 것이다.  먼저 멤버 조회하는 Service는 위의 예제와 동일하게 가지 갈 것이다. 그리고 아래와 같이 member 지웠다고 가정하는 메서드를 만들 것이다.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"members"</span>,key =<span class="string">"#id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMember</span><span class="params">(<span class="keyword">long</span> id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"deleteMember"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>CacheEvict 이어노테이션은 캐시에 저장된 데이터를 지우는 역할을 한다. 예를 들어 아까 1이라는 id의 멤버를 조회했을 경우 id 1로 조회하는 데이터는 캐시가 된것을 볼 수 있었다. 하지만 이메소드를 탄후에 다시 조회하려고 하면 캐시 된 내용이 사라지고 findById 메소드가 실행되는 모습을 볼 수 있다.<br>
<img src="https://i.imgur.com/PCwOLfU.png" alt=""><br>
위에 사진은 Member id가 1인유저를 findById 메소드를 이용해 조회했다가,다시 Member id가 1인 유저를 deleteMember 메소드를 호출한후 다시 Member id가 1인유저를 findById 메소드를 이용해 조회한 결과이다. 2번이상 findById를 탔음에도 불구하고 test라는 로그가 2번 찍힌 것을 볼 수 있다. 그 이유는 deleteMember를 탐으로써 캐시된 내용이 삭제되었기 때문이다.</p>
<p>Ehcache에대한 소스는 여기 <a href="https://github.com/minwan1/blog-example/tree/ehcache-example/cache" target="_blank" rel="noopener">깃허브</a>에서 확인할 수 있다.</p>
<h3><span id="마무리하며">마무리하며</span></h3>
<p>캐시에 대해 많은 내용들이 있지만 먼저 간단하게 캐시를 알아봤다. 캐시를 적용한다면 디비에 접근하는 시간, 비용들을 많이 아낄 수 있을 거라고 생각한다. 그렇다고해서 모든 애플리케이션 내에 캐시를 적용 한다고 해서 좋은 것은 아닐것 같다. 어느 정도 기준을 두고 캐시를 사용해야 한다고 생각한다. 안 그러면 캐시에 의해 과부하가 걸릴 수 있고 관리가 쉽지 않아 보이기 때문이다. 그래서 게시판이나 블로그 등 웹 기반의 애플리케이션은 최근에 사용된 데이터가 또다시 사용되는 경향을 있는 곳에서 사용하면 좋다고 한다. 최범균님 블로그를 보면 80:20 법칙에 따라 20%의 데이터가 전체 조회 건수의 80%를 차지할 경우 캐시를 사용함으로써 성능을 대폭적으로 향상시킬 수 있을 것이라고 말씀하셨다. 이 정도의 기준인 데서 캐시를 쓰면 정말 효율적으로 성능의 폭을 대폭 향상시킬 수 있고 시간, 자원 등을 아낄 수 있을 거라고 생각한다.</p>
<p>참고</p>
<ul>
<li><a href="https://www.mkyong.com/spring/spring-caching-and-ehcache-example/" target="_blank" rel="noopener">MKyong</a> <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache" target="_blank" rel="noopener">docs.spring.io</a></li>
<li><a href="http://wonwoo.ml/index.php/post/1551" target="_blank" rel="noopener">머루의 개발블로그</a></li>
<li><a href="http://book.naver.com/bookdb/book_detail.nhn?bid=9252528" target="_blank" rel="noopener">자바 ORM 표준 JPA 프로그래밍</a></li>
<li><a href="http://javacan.tistory.com/entry/133" target="_blank" rel="noopener">최범균님 블로그</a></li>
</ul>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2018/04/01/2018-04-01-spring-service/" data-toggle="tooltip" data-placement="top" title="스프링 기능 추상화 예제">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2018/03/11/2018-03-11-Spring-OAuth구현/" data-toggle="tooltip" data-placement="top" title="Spring Security OAuth2구현">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Spring cache, ehcache 구현</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">Cache</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">Spring Cache</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">Spring Cache 다양한 캐시 솔루션 도입방법</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">Spring Cache 사용방법</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">Spring Cache ConcurrentMapCacheManager 적용</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.2.</span> <span class="toc-nav-text">Spring Cache Ehcache 적용</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">마무리하며</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Spring" title="Spring">Spring</a>
                        
                          <a class="tag" href="/tags/#Java" title="Java">Java</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "https-minwan1-github-io";
    var disqus_identifier = "https://minwan1.github.io/2018/03/18/2018-03-18-Spring-Cache/";
    var disqus_url = "https://minwan1.github.io/2018/03/18/2018-03-18-Spring-Cache/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Minwan1">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Wan 2019 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://beantech.org">BeanTech</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://minwan1.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://minwan1.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
